{
  "schema_version": "0.4",
  "ir_kind": "hl",
  "metadata": {
    "title": "Example (abstract): adherent cell passaging",
    "version": "0.4-example",
    "source": {
      "type": "manual",
      "id": null,
      "uri": null,
      "retrieved_at": "2026-02-09"
    },
    "created_at": "2026-02-09"
  },
  "resources": {
    "materials": [
      {
        "id": "mat:wash_buffer",
        "name": "wash buffer"
      },
      {
        "id": "mat:detach_reagent",
        "name": "detachment reagent"
      },
      {
        "id": "mat:medium",
        "name": "culture medium"
      }
    ],
    "containers": [
      {
        "id": "ct:vessel_A",
        "name": "culture_vessel_A",
        "type": "culture_vessel_generic"
      },
      {
        "id": "ct:vessel_B",
        "name": "culture_vessel_B",
        "type": "culture_vessel_generic"
      },
      {
        "id": "ct:tube_cells",
        "name": "cell_tube",
        "type": "tube_generic"
      },
      {
        "id": "ct:waste",
        "name": "waste",
        "type": "waste_container"
      }
    ],
    "equipment": [
      {
        "id": "eq:inc1",
        "name": "incubator",
        "type": "incubator"
      },
      {
        "id": "eq:cent1",
        "name": "centrifuge",
        "type": "centrifuge"
      },
      {
        "id": "eq:counter1",
        "name": "cell_counter",
        "type": "cell_counter"
      }
    ],
    "samples": [],
    "data": []
  },
  "protocol": {
    "detail_level": 0,
    "steps": [
      {
        "id": "c1",
        "op": "observe",
        "label": "observe culture state",
        "inputs": [
          {
            "kind": "container",
            "id": "ct:vessel_A"
          }
        ],
        "outputs": [
          {
            "kind": "data",
            "id": "data:obs0"
          }
        ],
        "params": {
          "modality": "microscope",
          "features": {
            "confluency": null,
            "morphology": null
          }
        }
      },
      {
        "id": "c_skip",
        "op": "annotate",
        "label": "skip passaging note",
        "params": {
          "note": "If confluency < THRESH, skip passaging."
        }
      },
      {
        "id": "c2",
        "op": "transfer",
        "label": "remove spent medium",
        "inputs": [
          {
            "kind": "container",
            "id": "ct:vessel_A"
          }
        ],
        "outputs": [
          {
            "kind": "waste",
            "id": "ct:waste"
          }
        ],
        "params": {
          "amount": {
            "symbol": "X_all"
          },
          "transfer_kind": "aspirate"
        }
      },
      {
        "id": "c3",
        "op": "transfer",
        "label": "add wash buffer",
        "inputs": [
          {
            "kind": "material",
            "id": "mat:wash_buffer"
          }
        ],
        "outputs": [
          {
            "kind": "container",
            "id": "ct:vessel_A"
          }
        ],
        "params": {
          "amount": {
            "symbol": "X_wash"
          },
          "transfer_kind": "pipette"
        }
      },
      {
        "id": "c4",
        "op": "manipulate",
        "label": "rinse vessel",
        "inputs": [
          {
            "kind": "container",
            "id": "ct:vessel_A"
          }
        ],
        "params": {
          "action_kind": "rinse",
          "settings": {}
        }
      },
      {
        "id": "c5",
        "op": "transfer",
        "label": "remove wash",
        "inputs": [
          {
            "kind": "container",
            "id": "ct:vessel_A"
          }
        ],
        "outputs": [
          {
            "kind": "waste",
            "id": "ct:waste"
          }
        ],
        "params": {
          "amount": {
            "symbol": "X_all"
          },
          "transfer_kind": "aspirate"
        }
      },
      {
        "id": "c6",
        "op": "transfer",
        "label": "add detachment reagent",
        "inputs": [
          {
            "kind": "material",
            "id": "mat:detach_reagent"
          }
        ],
        "outputs": [
          {
            "kind": "container",
            "id": "ct:vessel_A"
          }
        ],
        "params": {
          "amount": {
            "symbol": "X_detach"
          },
          "transfer_kind": "pipette"
        }
      },
      {
        "id": "c7",
        "op": "incubate",
        "label": "incubate for detachment (macro)",
        "inputs": [
          {
            "kind": "container",
            "id": "ct:vessel_A"
          }
        ],
        "params": {
          "program_name": "DETACHMENT_PROGRAM",
          "device_ref": "eq:inc1"
        }
      },
      {
        "id": "c8",
        "op": "observe",
        "label": "check detachment",
        "inputs": [
          {
            "kind": "container",
            "id": "ct:vessel_A"
          }
        ],
        "outputs": [
          {
            "kind": "data",
            "id": "data:obs_detach"
          }
        ],
        "params": {
          "modality": "microscope",
          "features": {
            "detached_enough": null
          }
        }
      },
      {
        "id": "c7b",
        "op": "incubate",
        "label": "continue incubation (macro)",
        "inputs": [
          {
            "kind": "container",
            "id": "ct:vessel_A"
          }
        ],
        "params": {
          "program_name": "DETACHMENT_CONTINUE_PROGRAM",
          "device_ref": "eq:inc1"
        }
      },
      {
        "id": "c9",
        "op": "transfer",
        "label": "add medium to neutralize",
        "inputs": [
          {
            "kind": "material",
            "id": "mat:medium"
          }
        ],
        "outputs": [
          {
            "kind": "container",
            "id": "ct:vessel_A"
          }
        ],
        "params": {
          "amount": {
            "symbol": "X_neutralize"
          },
          "transfer_kind": "pipette"
        }
      },
      {
        "id": "c10",
        "op": "manipulate",
        "label": "dislodge cells",
        "inputs": [
          {
            "kind": "container",
            "id": "ct:vessel_A"
          }
        ],
        "params": {
          "action_kind": "dislodge_cells",
          "settings": {}
        }
      },
      {
        "id": "c11",
        "op": "transfer",
        "label": "collect cell suspension",
        "inputs": [
          {
            "kind": "container",
            "id": "ct:vessel_A"
          }
        ],
        "outputs": [
          {
            "kind": "container",
            "id": "ct:tube_cells"
          }
        ],
        "params": {
          "amount": {
            "symbol": "X_all"
          },
          "transfer_kind": "pipette"
        }
      },
      {
        "id": "c12",
        "op": "centrifuge",
        "label": "concentrate cells (macro)",
        "inputs": [
          {
            "kind": "container",
            "id": "ct:tube_cells"
          }
        ],
        "params": {
          "program_name": "CENTRIFUGE_PROGRAM",
          "device_ref": "eq:cent1"
        }
      },
      {
        "id": "c13",
        "op": "transfer",
        "label": "remove supernatant",
        "inputs": [
          {
            "kind": "container",
            "id": "ct:tube_cells"
          }
        ],
        "outputs": [
          {
            "kind": "waste",
            "id": "ct:waste"
          }
        ],
        "params": {
          "amount": {
            "symbol": "X_supernatant"
          },
          "transfer_kind": "aspirate"
        }
      },
      {
        "id": "c14",
        "op": "transfer",
        "label": "add medium to resuspend",
        "inputs": [
          {
            "kind": "material",
            "id": "mat:medium"
          }
        ],
        "outputs": [
          {
            "kind": "container",
            "id": "ct:tube_cells"
          }
        ],
        "params": {
          "amount": {
            "symbol": "X_resuspend"
          },
          "transfer_kind": "pipette"
        }
      },
      {
        "id": "c15",
        "op": "manipulate",
        "label": "resuspend",
        "inputs": [
          {
            "kind": "container",
            "id": "ct:tube_cells"
          }
        ],
        "params": {
          "action_kind": "resuspend",
          "settings": {}
        }
      },
      {
        "id": "c16",
        "op": "run_device",
        "label": "count cells (machine)",
        "inputs": [
          {
            "kind": "container",
            "id": "ct:tube_cells"
          }
        ],
        "params": {
          "device_kind": "cell_counter",
          "device_ref": "eq:counter1",
          "program": {
            "program_name": "COUNT_PROGRAM"
          }
        }
      },
      {
        "id": "c17",
        "op": "observe",
        "label": "record count",
        "inputs": [
          {
            "kind": "container",
            "id": "ct:tube_cells"
          }
        ],
        "outputs": [
          {
            "kind": "data",
            "id": "data:obs_count"
          }
        ],
        "params": {
          "modality": "instrument_readout",
          "features": {
            "cell_count": null,
            "viability": null
          }
        }
      },
      {
        "id": "c18",
        "op": "transfer",
        "label": "seed new vessel",
        "inputs": [
          {
            "kind": "container",
            "id": "ct:tube_cells"
          }
        ],
        "outputs": [
          {
            "kind": "container",
            "id": "ct:vessel_B"
          }
        ],
        "params": {
          "amount": {
            "symbol": "X_seed"
          },
          "transfer_kind": "pipette"
        }
      },
      {
        "id": "c19",
        "op": "incubate",
        "label": "culture incubation (macro)",
        "inputs": [
          {
            "kind": "container",
            "id": "ct:vessel_B"
          }
        ],
        "params": {
          "program_name": "CULTURE_PROGRAM",
          "device_ref": "eq:inc1"
        }
      },
      {
        "id": "c20",
        "op": "annotate",
        "label": "done",
        "params": {
          "note": "Passaging completed (abstract)."
        }
      }
    ],
    "start_step_id": "c1",
    "edges": [
      {
        "from": "c1",
        "to": "c2",
        "condition": {
          "op": "ge",
          "left": {
            "ref": "data:obs0.features.confluency"
          },
          "right": {
            "symbol": "THRESH_CONFLUENCY"
          }
        },
        "priority": 1
      },
      {
        "from": "c1",
        "to": "c_skip",
        "condition": {
          "op": "lt",
          "left": {
            "ref": "data:obs0.features.confluency"
          },
          "right": {
            "symbol": "THRESH_CONFLUENCY"
          }
        },
        "priority": 0
      },
      {
        "from": "c_skip",
        "to": "c20"
      },
      {
        "from": "c2",
        "to": "c3"
      },
      {
        "from": "c3",
        "to": "c4"
      },
      {
        "from": "c4",
        "to": "c5"
      },
      {
        "from": "c5",
        "to": "c6"
      },
      {
        "from": "c6",
        "to": "c7"
      },
      {
        "from": "c7",
        "to": "c8"
      },
      {
        "from": "c8",
        "to": "c9",
        "condition": {
          "op": "eq",
          "left": {
            "ref": "data:obs_detach.features.detached_enough"
          },
          "right": {
            "const": true
          }
        },
        "priority": 1
      },
      {
        "from": "c8",
        "to": "c7b",
        "condition": {
          "op": "eq",
          "left": {
            "ref": "data:obs_detach.features.detached_enough"
          },
          "right": {
            "const": false
          }
        },
        "priority": 0
      },
      {
        "from": "c7b",
        "to": "c8"
      },
      {
        "from": "c9",
        "to": "c10"
      },
      {
        "from": "c10",
        "to": "c11"
      },
      {
        "from": "c11",
        "to": "c12"
      },
      {
        "from": "c12",
        "to": "c13"
      },
      {
        "from": "c13",
        "to": "c14"
      },
      {
        "from": "c14",
        "to": "c15"
      },
      {
        "from": "c15",
        "to": "c16"
      },
      {
        "from": "c16",
        "to": "c17"
      },
      {
        "from": "c17",
        "to": "c18"
      },
      {
        "from": "c18",
        "to": "c19"
      },
      {
        "from": "c19",
        "to": "c20"
      }
    ],
    "step_order": [
      "c1",
      "c_skip",
      "c2",
      "c3",
      "c4",
      "c5",
      "c6",
      "c7",
      "c8",
      "c7b",
      "c9",
      "c10",
      "c11",
      "c12",
      "c13",
      "c14",
      "c15",
      "c16",
      "c17",
      "c18",
      "c19",
      "c20"
    ]
  }
}